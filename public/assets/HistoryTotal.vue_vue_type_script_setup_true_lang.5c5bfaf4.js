import{B as $,_ as x,y as D,o as f,e as g,f as O,q as p,d as A,r as m,P as V,Q as F,g as M,i as C,A as I,l as N}from"./index.9ba822ed.js";var L={root:{position:"relative"}},T={root:"p-chart"},R=$.extend({name:"chart",inlineStyles:L,classes:T}),W={name:"BaseChart",extends:D,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:R,provide:function(){return{$parentInstance:this}}},_={name:"Chart",extends:W,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;x(()=>import("./auto.d0a6079f.js"),[]).then(function(r){e.chart&&(e.chart.destroy(),e.chart=null),r&&r.default&&(e.chart=new r.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var r=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),n=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);r&&r[0]&&n&&this.$emit("select",{originalEvent:e,element:r[0],dataset:n})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function d(t){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(t)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P(Object(r),!0).forEach(function(n){K(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function K(t,e,r){return e=U(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U(t){var e=Y(t,"string");return d(e)=="symbol"?e:String(e)}function Y(t,e){if(d(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q=["width","height"];function G(t,e,r,n,c,l){return f(),g("div",p({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[O("canvas",p({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(h){return l.onCanvasClick(h)})},w(w({},t.canvasProps),t.ptm("canvas"))),null,16,q)],16)}_.render=G;var H={root:"p-progress-spinner",spinner:"p-progress-spinner-svg",circle:"p-progress-spinner-circle"},Q=$.extend({name:"progressspinner",classes:H}),z={name:"BaseProgressSpinner",extends:D,props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},style:Q,provide:function(){return{$parentInstance:this}}},B={name:"ProgressSpinner",extends:z,inheritAttrs:!1,computed:{svgStyle:function(){return{"animation-duration":this.animationDuration}}}},J=["fill","stroke-width"];function X(t,e,r,n,c,l){return f(),g("div",p({class:t.cx("root"),role:"progressbar"},t.ptmi("root")),[(f(),g("svg",p({class:t.cx("spinner"),viewBox:"25 25 50 50",style:l.svgStyle},t.ptm("spinner")),[O("circle",p({class:t.cx("circle"),cx:"50",cy:"50",r:"20",fill:t.fill,"stroke-width":t.strokeWidth,strokeMiterlimit:"10"},t.ptm("circle")),null,16,J)],16))],16)}B.render=X;const Z={key:0,class:"card flex justify-content-center"},et=A({__name:"HistoryTotal",props:{days:{}},setup(t){const e=m(),r=m(),n=m(!0),c=N(),l=t,h=a=>`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")}`;V(async()=>{var a;try{const o=await F(l.days),i=new Date,s=h(i),y=new Date;y.setDate(y.getDate()-1);const j=h(y),v=[],b=[],S=[];console.log(s),(a=o.data.data)==null||a.forEach(u=>{v.push(u.stat_date===s?"\u4ECA\u5929":u.stat_date===j?"\u6628\u5929":u.stat_date),b.push(Math.floor(u.parsing_traffic/1024/1024/1024)),S.push(u.parsing_count)}),e.value=E(v,b,S),r.value=k(),n.value=!1}catch{c.warn("\u5386\u53F2\u7EDF\u8BA1\u52A0\u8F7D\u5931\u8D25")}});const E=(a,o,i)=>{const s=getComputedStyle(document.documentElement);return{labels:a,datasets:[{label:"\u89E3\u6790\u5BB9\u91CF(GB)",data:o,fill:!1,tension:.4,borderColor:s.getPropertyValue("--cyan-500")},{label:"\u89E3\u6790\u6B21\u6570",data:i,fill:!1,tension:.4,borderColor:s.getPropertyValue("--orange-500")}]}},k=()=>{const a=getComputedStyle(document.documentElement),o=a.getPropertyValue("--text-color"),i=a.getPropertyValue("--text-color-secondary"),s=a.getPropertyValue("--surface-border");return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:o}}},scales:{x:{ticks:{color:i},grid:{color:s}},y:{ticks:{color:i},grid:{color:s}}}}};return(a,o)=>n.value?(f(),g("div",Z,[M(C(B),{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])):(f(),I(C(_),{key:1,type:"line",data:e.value,options:r.value,class:"h-20rem"},null,8,["data","options"]))}});export{et as _};
